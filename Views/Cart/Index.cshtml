@model IEnumerable<MyShop.Models.Cart>
@{
	ViewData["Title"] = "Giỏ hàng";
	Layout = "~/Views/Shared/_Layout.cshtml";
	decimal? totalPriceCart = 0;
	int totalQuantity = 0;
	foreach (var item in Model)
	{
		totalQuantity += item.Quantity;
		totalPriceCart += item.Price * item.Quantity;
	}
}
<main id="main" class="">
	@functions {
		string FormatPrice(decimal? price)
		{
			return (price ?? 0)
			.ToString("#,##0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"));
		}
	}


	<div class="checkout-page-title page-title">
		<div class="page-title-inner flex-row medium-flex-wrap container">
			<div class="flex-col flex-grow medium-text-center">
				<nav class="breadcrumbs flex-row flex-row-center heading-font checkout-breadcrumbs text-center strong h2 uppercase">
					<a href="/cart" class="current">
						Giỏ hàng
					</a>
					<span class="divider hide-for-small"><i class="icon-angle-right"></i></span>
					<a href="/checkout" class="hide-for-small">
						Thanh toán
					</a>
					<span class="divider hide-for-small"><i class="icon-angle-right"></i></span>
					<a href="#" class="no-click hide-for-small">
						Hoàn tất
					</a>
				</nav>
			</div>
		</div>
	</div>
	<div class="cart-container container page-wrapper page-checkout">
		<div class="woocommerce">
			<div class="woocommerce-notices-wrapper"></div><div class="woocommerce row row-large row-divided">
				<div class="col large-12 pb-0 ">


					<form class="woocommerce-cart-form" action="/cart/update" method="post">
						<div class="cart-wrapper sm-touch-scroll">


							<table class="shop_table shop_table_responsive cart woocommerce-cart-form__contents" cellspacing="0">
								<thead>
									<tr>
										<th class="product-name" colspan="3">Sản phẩm</th>
										<th class="product-price">Giá</th>
										<th class="product-quantity">Số lượng</th>
										<th class="product-subtotal">Tạm tính</th>
									</tr>
								</thead>
								<tbody>
									@foreach(var p in Model)
									{
										<tr class="woocommerce-cart-form__cart-item cart_item">

											<td class="product-remove">
												<a href="/cart/remove?id=@p.Id" class="remove" aria-label="Xóa @p.Name khỏi giỏ hàng" data-product_id="16398" data-product_sku="">&times;</a>
											</td>

											<td class="product-thumbnail">
												<a href="/chi-tiet/@p.Slug"><img fetchpriority="high" decoding="async" width="300" height="300" src="@p.Image" class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt="@p.Name"/></a>
											</td>

											<td class="product-name" data-title="Sản phẩm">
												<a href="/chi-tiet/@p.Slug">@p.Name</a>							
												<div class="show-for-small mobile-product-price">
													<span class="mobile-product-price__qty">2 x </span>
													<span class="woocommerce-Price-amount amount"><bdi>0&nbsp;<span class="woocommerce-Price-currencySymbol">&#8363;</span></bdi></span>
												</div>
											</td>

											<td class="product-price" data-title="Giá">
												<span class="woocommerce-Price-amount amount">
													<bdi>@FormatPrice(p.Price)<span class="woocommerce-Price-currencySymbol"> &#8363;</span></bdi>
													</span>
											</td>

											<td class="product-quantity" data-title="Số lượng">
												<div class="quantity buttons_added form-flat">
													<input type="button" value="-" class="minus button is-form">				<label class="screen-reader-text" for="quantity_6940dbc8463f5">Âm thanh di động không dây INNOSMART TD-B790 số lượng</label>
													<input type="number"
														   id="quantity_6940dbc8463f5"
														   class="input-text qty text"
														   name="@p.Id"
														   value="@p.Quantity"
														   aria-label="Số lượng sản phẩm"
														   size="4"
														   min="0"
														   max=""
														   step="1"
														   placeholder=""
														   inputmode="numeric"
														   autocomplete="off" />
													<input type="button" value="+" class="plus button is-form">
												</div>
											</td>

											<td class="product-subtotal" data-title="Tạm tính">
												<span class="woocommerce-Price-amount amount">
													<bdi>@FormatPrice(p.Price * p.Quantity)<span class="woocommerce-Price-currencySymbol">&#8363;</span></bdi>
												</span>
											</td>
										</tr>
									}
									


									<tr>
										<td colspan="6" class="actions clear">


											<div class="continue-shopping pull-left text-left">
												<a class="button-continue-shopping button primary is-outline" href="/san-pham">
													&#8592;&nbsp;Tiếp tục xem sản phẩm
												</a>
											</div>

											<button type="submit" class="button primary mt-0 pull-left small" name="update_cart" value="Cập nhật giỏ hàng">Cập nhật giỏ hàng</button>

											<input type="hidden" id="woocommerce-cart-nonce" name="woocommerce-cart-nonce" value="edb12000d7" /><input type="hidden" name="_wp_http_referer" value="/cart/" />
										</td>
									</tr>

								</tbody>
							</table>
						</div>
					</form>
				</div>


				<div class="cart-collaterals large-5 col pb-0">

					<div class="cart-sidebar col-inner ">
						<div class="cart_totals ">

							<table cellspacing="0">
								<thead>
									<tr>
										<th class="product-name" colspan="2">Tổng cộng giỏ hàng</th>
									</tr>
								</thead>
							</table>

							<h2>Tổng cộng giỏ hàng</h2>

							<table cellspacing="0" class="shop_table shop_table_responsive">

								<tr class="cart-subtotal">
									<th>Tạm tính</th>
									<td data-title="Tạm tính"><span class="woocommerce-Price-amount amount"><bdi>@FormatPrice(totalPriceCart)<span class="woocommerce-Price-currencySymbol">&#8363;</span></bdi></span></td>
								</tr>




								<tr class="woocommerce-shipping-totals shipping ">
									<td class="shipping__inner" colspan="2">
										<table class="shipping__table ">
											<tbody>
												<tr>
													<th>Vận chuyển</th>
													<td data-title="Vận chuyển">
														<ul id="shipping_method" class="shipping__list woocommerce-shipping-methods">
															<li class="shipping__list_item">
																<input type="hidden" name="shipping_method[0]" data-index="0" id="shipping_method_0_free_shipping1" value="free_shipping:1" class="shipping_method" /><label class="shipping__list_label" for="shipping_method_0_free_shipping1">Giao hàng miễn phí</label>
															</li>
														</ul>
														<p class="woocommerce-shipping-destination">
															Các tùy chọn vận chuyển sẽ được cập nhật trong quá trình thanh toán.
														</p>



														<form class="woocommerce-shipping-calculator" action="https://inno.com.vn/cart/" method="post">

															<a href="#" class="shipping-calculator-button" aria-expanded="false" aria-controls="shipping-calculator-form" role="button">Tính phí vận chuyển</a>
															<section class="shipping-calculator-form" id="shipping-calculator-form" style="display:none;">

																<p class="form-row form-row-wide" id="calc_shipping_country_field">
																	<label for="calc_shipping_country">Quốc gia / khu vực</label>
																	<select name="calc_shipping_country" id="calc_shipping_country" class="country_to_state country_select" rel="calc_shipping_state">
																		<option value="default">Chọn Quốc gia/Khu vực&hellip;</option>
																		<option value="VN" selected='selected'>Việt Nam</option>
																	</select>
																</p>

																<p class="form-row form-row-wide" id="calc_shipping_state_field">
																	<input type="hidden" name="calc_shipping_state" id="calc_shipping_state" />
																</p>

																<p class="form-row form-row-wide" id="calc_shipping_city_field">
																	<label for="calc_shipping_city">Thành phố:</label>
																	<input type="text" class="input-text" value="" name="calc_shipping_city" id="calc_shipping_city" />
																</p>

																<p class="form-row form-row-wide" id="calc_shipping_postcode_field">
																	<label for="calc_shipping_postcode">Mã bưu điện / ZIP:</label>
																	<input type="text" class="input-text" value="" name="calc_shipping_postcode" id="calc_shipping_postcode" />
																</p>

																<p><button type="submit" name="calc_shipping" value="1" class="button">Cập nhật</button></p>
																<input type="hidden" id="woocommerce-shipping-calculator-nonce" name="woocommerce-shipping-calculator-nonce" value="ec4fa445f5" /><input type="hidden" name="_wp_http_referer" value="/cart/" />
															</section>
														</form>

													</td>
												</tr>
											</tbody>
										</table>
									</td>
								</tr>






								<tr class="order-total">
									<th>Tổng</th>
									<td data-title="Tổng"><strong><span class="woocommerce-Price-amount amount"><bdi>@FormatPrice(totalPriceCart)<span class="woocommerce-Price-currencySymbol">&#8363;</span></bdi></span></strong> </td>
								</tr>


							</table>

							<div class="wc-proceed-to-checkout">

								<a href="https://inno.com.vn/checkout/" class="checkout-button button alt wc-forward">
									Tiến hành thanh toán
								</a>
							</div>


						</div>
						<div class="cart-sidebar-content relative"></div>
					</div>

				</div>
			</div>

			<div class="cart-footer-content after-cart-content relative"></div>
		</div>
	</div>


</main>